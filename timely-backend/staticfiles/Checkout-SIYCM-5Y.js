import{c as N,e as f,g as _,h as C,r as w,f as k,j as e,C as h}from"./index-BzJ6QfSi.js";import{u as P,o as F,s as n,_ as q,n as g}from"./useForm-CAIEg1RM.js";import{F as V,a as t,I as l,b as S,c as T,B as E}from"./Form-DKyzaUtQ.js";import{T as y}from"./ticket-DB_wJdvt.js";import{A as I}from"./arrow-left-BlSRFXVp.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],$=N("credit-card",B),z=()=>{const{eventId:i}=f(),c=_(),{showSuccess:v,showError:p}=C(),[d,o]=w.useState(!1),{data:r,isLoading:j}=k(parseInt(i||"0")),s=P({initialValues:{event_id:parseInt(i||"0"),quantity:1,payment_method:"card",card_number:"",expiry_date:"",cvv:"",cardholder_name:"",billing_address:""},validationSchema:F({event_id:g().min(1,"Please select an event"),quantity:g().min(1,"Quantity must be at least 1").max(10,"Maximum 10 tickets per purchase"),payment_method:q(["card","cash"]),card_number:n().min(16,"Card number must be 16 digits"),expiry_date:n().min(5,"Please enter a valid expiry date"),cvv:n().min(3,"CVV must be at least 3 digits"),cardholder_name:n().min(1,"Cardholder name is required"),billing_address:n().min(1,"Billing address is required")}),onSubmit:async()=>{o(!0);try{await new Promise(a=>setTimeout(a,2e3)),v("Purchase Successful","Your tickets have been purchased successfully!"),c("/tickets/me")}catch{p("Payment Failed","Failed to process payment. Please try again.")}finally{o(!1)}}}),m=(r?.fee_cents?r.fee_cents/100:0)*s.values.quantity,u=m*.05,x=m+u;return j?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-4",children:[...Array(6)].map((a,b)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},b))}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})]})})}):r?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("button",{onClick:()=>c(`/events/${i}`),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),"Back to Event"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Purchase Tickets"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Complete your ticket purchase for ",r.name]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx($,{className:"h-5 w-5 mr-2"}),"Payment Details"]}),e.jsxs(V,{onSubmit:s.handleSubmit,children:[e.jsx(t,{children:e.jsx(l,{label:"Number of Tickets",name:"quantity",type:"number",min:"1",max:"10",value:s.values.quantity,onChange:a=>s.setValue("quantity",parseInt(a.target.value)||1),error:s.errors.quantity,required:!0})}),e.jsxs(t,{children:[e.jsx("label",{className:"form-label",children:"Payment Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"payment_method",value:"card",checked:s.values.payment_method==="card",onChange:a=>s.setValue("payment_method",a.target.value),className:"h-4 w-4 text-primary-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:"Credit/Debit Card"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"payment_method",value:"cash",checked:s.values.payment_method==="cash",onChange:a=>s.setValue("payment_method",a.target.value),className:"h-4 w-4 text-primary-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:"Cash at Event"})]})]})]}),s.values.payment_method==="card"&&e.jsxs(e.Fragment,{children:[e.jsx(t,{children:e.jsx(l,{label:"Card Number",name:"card_number",value:s.values.card_number,onChange:a=>s.setValue("card_number",a.target.value),error:s.errors.card_number,placeholder:"1234 5678 9012 3456",required:!0})}),e.jsxs(S,{children:[e.jsx(t,{children:e.jsx(l,{label:"Expiry Date",name:"expiry_date",value:s.values.expiry_date,onChange:a=>s.setValue("expiry_date",a.target.value),error:s.errors.expiry_date,placeholder:"MM/YY",required:!0})}),e.jsx(t,{children:e.jsx(l,{label:"CVV",name:"cvv",value:s.values.cvv,onChange:a=>s.setValue("cvv",a.target.value),error:s.errors.cvv,placeholder:"123",required:!0})})]}),e.jsx(t,{children:e.jsx(l,{label:"Cardholder Name",name:"cardholder_name",value:s.values.cardholder_name,onChange:a=>s.setValue("cardholder_name",a.target.value),error:s.errors.cardholder_name,required:!0})}),e.jsx(t,{children:e.jsx(l,{label:"Billing Address",name:"billing_address",value:s.values.billing_address,onChange:a=>s.setValue("billing_address",a.target.value),error:s.errors.billing_address,required:!0})})]}),e.jsx(T,{children:e.jsx(E,{type:"submit",loading:d,disabled:!s.isValid||d,className:"w-full",children:d?"Processing Payment...":e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Complete Purchase - $",x.toFixed(2)]})})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(y,{className:"h-5 w-5 mr-2"}),"Order Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(r.start_datetime).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),r.venue_name&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.venue_name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Tickets (Ã—",s.values.quantity,")"]}),e.jsxs("span",{className:"text-gray-900",children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Service Fee"}),e.jsxs("span",{className:"text-gray-900",children:["$",u.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",x.toFixed(2)]})]})})]}),s.values.payment_method==="cash"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Cash Payment:"})," You'll pay $",x.toFixed(2)," at the event venue."]})]})})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Event Not Found"}),e.jsx("p",{className:"text-gray-500",children:"The event you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>c("/events"),className:"mt-4 btn btn-primary",children:"Browse Events"})]})})})};export{z as default};
