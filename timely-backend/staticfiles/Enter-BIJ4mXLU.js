import{n as A,s as I,h as T,t as L,v as k,w as P,x as M,r as c,j as e,C as x,p as O}from"./index-BzJ6QfSi.js";import{A as q}from"./arrow-left-BlSRFXVp.js";import{S as U}from"./save-4iA0hoND.js";import{T as v}from"./trophy-CikPk1NU.js";const G=()=>{const[b]=A(),n=b.get("fixture"),{user:w}=I(),{showSuccess:o,showError:u}=T(),{data:S}=L({coach:w?.id,page_size:50}),{data:i,isLoading:R}=k({fixture:n?parseInt(n):void 0}),_=P(),D=M(),h=S?.results||[],t=i?.results?.[0],[l,C]=c.useState(n?parseInt(n):""),[d,g]=c.useState(t?.home_score?.toString()||""),[m,j]=c.useState(t?.away_score?.toString()||""),[p,N]=c.useState(t?.notes||""),[f,y]=c.useState(!1),a=h?.find(s=>s.id.toString()===l),E=async s=>{if(s.preventDefault(),!l||!d||!m){u("Validation Error","Please fill in all required fields");return}y(!0);try{const r={fixture:parseInt(l.toString()),home_score:parseInt(d),away_score:parseInt(m),notes:p||null,status:"CONFIRMED"};t?(await D.mutateAsync({id:t.id,...r}),o("Result Updated","The result has been updated successfully")):(await _.mutateAsync(r),o("Result Recorded","The result has been recorded successfully")),g(""),j(""),N("")}catch{u("Submission Failed","Failed to record result. Please try again.")}finally{y(!1)}},F=l&&d&&m;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"mr-4 p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Enter Results"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Record match results for your fixtures"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Match Result"}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Select Fixture"}),e.jsxs("select",{value:l,onChange:s=>C(s.target.value),className:"form-input",required:!0,children:[e.jsx("option",{value:"",children:"Choose a fixture..."}),h.filter(s=>s.status==="COMPLETED").map(s=>e.jsxs("option",{value:s.id,children:[s.home_team_name," vs ",s.away_team_name," - ",new Date(s.scheduled_date).toLocaleDateString()]},s.id))]})]}),a&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Fixture Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Date:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:new Date(a.scheduled_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Venue:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.venue_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Round:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.round})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:`ml-2 status-badge ${a.status==="COMPLETED"?"bg-green-100 text-green-800":a.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:a.status})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[a?.home_team_name||"Home Team"," Score"]}),e.jsx("input",{type:"number",min:"0",value:d,onChange:s=>g(s.target.value),className:"form-input text-center text-2xl font-bold",placeholder:"0",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[a?.away_team_name||"Away Team"," Score"]}),e.jsx("input",{type:"number",min:"0",value:m,onChange:s=>j(s.target.value),className:"form-input text-center text-2xl font-bold",placeholder:"0",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notes (Optional)"}),e.jsx("textarea",{value:p,onChange:s=>N(s.target.value),className:"form-input",rows:3,placeholder:"Add any additional notes about the match..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:!F||f,className:"btn btn-primary inline-flex items-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner spinner-sm mr-2"}),t?"Updating...":"Recording..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t?"Update Result":"Record Result"]})})})]})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"card mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Results"}),R?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,r)=>e.jsxs("div",{className:"flex items-center space-x-3 animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},r))}):i?.results&&i.results.length>0?e.jsx("div",{className:"space-y-3",children:i.results.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.home_score," - ",s.away_score]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.recorded_at).toLocaleDateString()})]})]},s.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(v,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No results yet"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Instructions"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Select a completed fixture from the dropdown"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Enter the final scores for both teams"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Add any additional notes if needed"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(O,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Results cannot be edited once confirmed"})]})]})]})]})]})]})})};export{G as default};
