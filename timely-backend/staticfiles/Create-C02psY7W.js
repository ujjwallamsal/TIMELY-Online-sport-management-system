import{g as _,h as y,i as C,k as F,l as E,j as t}from"./index-BzJ6QfSi.js";import{o as S,s as i,_ as m,n as l,u as f}from"./useForm-CAIEg1RM.js";import{F as B,a as r,I as s,T as V,b as o,S as d,c as D,B as v}from"./Form-DKyzaUtQ.js";const p=S({name:i().min(1,"Event name is required").max(200,"Name must be less than 200 characters"),description:i().min(1,"Description is required").max(2e3,"Description must be less than 2000 characters"),sport:l().min(1,"Please select a sport"),venue:l().min(1,"Please select a venue"),start_datetime:i().min(1,"Start date is required"),end_datetime:i().min(1,"End date is required"),fee_cents:l().min(0,"Registration fee must be positive").optional(),capacity:l().min(1,"Maximum participants must be at least 1").optional(),status:m(["DRAFT","PUBLISHED","CANCELLED","COMPLETED"]).default("DRAFT"),visibility:m(["PUBLIC","PRIVATE"]).default("PUBLIC"),location:i().optional(),registration_open_at:i().optional(),registration_close_at:i().optional()}).refine(n=>{const u=new Date(n.start_datetime);return new Date(n.end_datetime)>u},{message:"End date must be after start date",path:["end_datetime"]}),P=p.omit({status:!0});p.partial();const N=()=>{const n=_(),{showSuccess:u,showError:c}=y(),h=C(),{data:x=[]}=F(),{data:b=[]}=E(),e=f({initialValues:{name:"",description:"",sport:0,venue:0,start_datetime:"",end_datetime:"",fee_cents:void 0,capacity:void 0,visibility:"PUBLIC",location:"",registration_open_at:"",registration_close_at:""},validationSchema:P,onSubmit:async a=>{try{await h.mutateAsync(a),u("Event Created","The event has been created successfully."),n("/events")}catch{c("Creation Failed","Failed to create event. Please try again.")}}}),g=x?.results?.map(a=>({value:a.id.toString(),label:a.name}))||[],j=b?.results?.map(a=>({value:a.id.toString(),label:a.name}))||[];return t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"card",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create Event"}),t.jsxs(B,{onSubmit:e.handleSubmit,children:[t.jsx(r,{children:t.jsx(s,{label:"Event Name",name:"name",value:e.values.name,onChange:a=>e.setValue("name",a.target.value),onBlur:()=>e.validateField("name"),error:e.errors.name,placeholder:"Enter event name",required:!0})}),t.jsx(r,{children:t.jsx(V,{label:"Description",name:"description",value:e.values.description,onChange:a=>e.setValue("description",a.target.value),onBlur:()=>e.validateField("description"),error:e.errors.description,placeholder:"Enter event description",rows:4,required:!0})}),t.jsxs(o,{children:[t.jsx(r,{children:t.jsx(d,{label:"Sport",name:"sport",value:e.values.sport.toString(),onChange:a=>e.setValue("sport",parseInt(a.target.value)),onBlur:()=>e.validateField("sport"),error:e.errors.sport,options:g,required:!0})}),t.jsx(r,{children:t.jsx(d,{label:"Venue",name:"venue",value:e.values.venue.toString(),onChange:a=>e.setValue("venue",parseInt(a.target.value)),onBlur:()=>e.validateField("venue"),error:e.errors.venue,options:j,required:!0})})]}),t.jsxs(o,{children:[t.jsx(r,{children:t.jsx(s,{label:"Start Date & Time",name:"start_datetime",type:"datetime-local",value:e.values.start_datetime,onChange:a=>e.setValue("start_datetime",a.target.value),onBlur:()=>e.validateField("start_datetime"),error:e.errors.start_datetime,required:!0})}),t.jsx(r,{children:t.jsx(s,{label:"End Date & Time",name:"end_datetime",type:"datetime-local",value:e.values.end_datetime,onChange:a=>e.setValue("end_datetime",a.target.value),onBlur:()=>e.validateField("end_datetime"),error:e.errors.end_datetime,required:!0})})]}),t.jsxs(o,{children:[t.jsx(r,{children:t.jsx(s,{label:"Registration Fee (USD)",name:"fee_cents",type:"number",step:"0.01",min:"0",value:e.values.fee_cents?(e.values.fee_cents/100).toFixed(2):"",onChange:a=>e.setValue("fee_cents",a.target.value?Math.round(parseFloat(a.target.value)*100):void 0),onBlur:()=>e.validateField("fee_cents"),error:e.errors.fee_cents,placeholder:"0.00"})}),t.jsx(r,{children:t.jsx(s,{label:"Capacity",name:"capacity",type:"number",min:"1",value:e.values.capacity||"",onChange:a=>e.setValue("capacity",a.target.value?parseInt(a.target.value):void 0),onBlur:()=>e.validateField("capacity"),error:e.errors.capacity,placeholder:"No limit"})})]}),t.jsxs(o,{children:[t.jsx(r,{children:t.jsx(d,{label:"Visibility",name:"visibility",value:e.values.visibility,onChange:a=>e.setValue("visibility",a.target.value),onBlur:()=>e.validateField("visibility"),error:e.errors.visibility,options:[{value:"PUBLIC",label:"Public"},{value:"PRIVATE",label:"Private"}],required:!0})}),t.jsx(r,{children:t.jsx(s,{label:"Location (Optional)",name:"location",value:e.values.location,onChange:a=>e.setValue("location",a.target.value),onBlur:()=>e.validateField("location"),error:e.errors.location,placeholder:"Additional location details"})})]}),t.jsxs(D,{children:[t.jsx(v,{type:"button",variant:"outline",onClick:()=>n("/events"),children:"Cancel"}),t.jsx(v,{type:"submit",loading:e.isSubmitting,disabled:!e.isValid||e.isSubmitting,children:"Create Event"})]})]})]})})})};export{N as default};
